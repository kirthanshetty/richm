function MaisonBox(e,t){repositionItems(e),$(window).resize(function(){repositionItems(e,t)}),e.on("click",">ul li a",function(){var n=this.href,r=$(this),i=$(this).parent().parent();return e.find(">ul >li").removeClass("active"),r.parent().addClass("active"),$.get(n,function(e){ajaxData=e;var n=i.parent().find(".our_maison_gallery").parent();n.remove();var s=$(e);i.next().length<1?i.before(s):i.after(s),MaisonSildeshow(s,r,n.length<1,t)}),!1})}function MaisonSildeshow(e,t,n,r){var i=function(t){(t.keyCode==27||t.which==27)&&e.find(".maison_close").click()};$("body").on("keypress",i),e.find(".maison_close").click(function(){return $("body").off("keypress",i),$(this).parent().parent().slideUp(function(){$(this).remove(),r(),$(".maisons_lists ul li").removeClass("lightbox-open"),$(".maisons_lists ul li a img").removeClass("listI").addClass("blur-img"),setTimeout(function(){$(".maisons_lists ul li").removeClass("fading")},1e3),$(".maisons_lists ul li").addClass("fading")}),!1});var s=e.find(".maison_main_content:eq(0)").outerWidth();e.find(".slides-container").width(s).css("overflow","hidden"),e.find(".maison_main_content").width(s-120);var o=e.find(".slides").width(s*3),u=e.find(".buttons a"),a=e.find(".maison_image a"),f=3,l=0;n?e.hide().slideDown(function(){r(),$(".maisons_lists ul li").addClass("lightbox-open")}):($(".maisons_lists ul li a img").addClass("listI"),r()),e.find(".maison_next").click(function(){var e=t.parent().next().find("a");return e.length<1&&(e=t.parent().parent().next().next().find("li:first a")),e.click(),!1}),e.find(".maison_prev").click(function(){var e=t.parent().prev().find("a");if(e.length<1){var n=t.parent().parent().prev();/div/i.test(n[0].tagName)&&(n=n.prev()),e=n.find("li:last a")}return e.click(),!1});var c=setInterval(function(){var e=u.parent().parent().find("li.active").next();e.length<1&&(e=u.parent().parent().find("li:first")),e.find("a").data("auto",!0).click()},2e3);u.click(function(e){e.preventDefault();if($(this).parent().hasClass("active"))return;$(this).data("auto")||clearInterval(c),$(this).data("auto",!1),$(this).parent().parent().find("li").removeClass("active"),$(this).parent().addClass("active");var t=a.filter(":visible"),n=$($(this).attr("href"));t.fadeOut(),n.fadeIn()})}function repositionItems(e,t){var n=e.find(">ul"),r=n.find(">li"),i=getNoElsInRow(),s=$("<ul>");if(prevElsInRow==i)return;prevElsInRow=i,r.each(function(e){var t=e+1;s.append($(this)),t%i==0&&(n.eq(0).before(s),s=$("<ul>"))}),n.eq(0).before(s),n.remove();var o=e.find(".our_maison_gallery").parent();if(o.length>0){o.remove();var u=r.filter(".active").parent(),o=$(ajaxData);u.next().length>0?u.after(o):u.before(o),MaisonSildeshow(o,r.filter(".active a"),!1,t)}}function getNoElsInRow(){var e=$(window).width();for(var t=0;t<widthElCnt.length;t++)if(e>widthElCnt[t].width)return widthElCnt[t].elCnt;return 1}var widthElCnt=[{width:1007,elCnt:5},{width:817,elCnt:4},{width:627,elCnt:3},{width:100,elCnt:2}],prevElsInRow,ajaxData;